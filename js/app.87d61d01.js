(function(e){function t(t){for(var n,a,o=t[0],c=t[1],u=t[2],d=0,p=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&p.push(s[a][0]),s[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==s[c]&&(n=!1)}n&&(i.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},s={app:0},i=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/youTube-spa/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"00f2":function(e,t,r){},"0b90":function(e,t,r){},"0bec":function(e,t,r){},"0e21":function(e,t,r){},"11be":function(e,t,r){"use strict";r("f5f7")},"1a09":function(e,t,r){},"1acc":function(e,t,r){},"20e5":function(e,t,r){},"24e1":function(e,t,r){"use strict";r("ad73")},"2b0d":function(e,t,r){"use strict";r("c360")},"2c5e":function(e,t,r){"use strict";r("0b90")},"3c8d":function(e,t,r){"use strict";r("5c20")},"42ee":function(e,t,r){"use strict";r("a67b")},"47d4":function(e,t,r){},"520b":function(e,t,r){},"55a9":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),s={class:"wrapper"};function i(e,t,r,i,a,o){var c=Object(n["J"])("search-bar"),u=Object(n["J"])("nav-bar"),l=Object(n["J"])("router-view"),d=Object(n["J"])("q-scroll-area");return Object(n["B"])(),Object(n["g"])(d,{style:{height:"100vh"}},{default:Object(n["P"])((function(){return[Object(n["l"])(u,null,{"search-input":Object(n["P"])((function(){return[Object(n["l"])(c,{onSearch:o.routeAndSaveRequest,onInputed:o.getRequestByInputedVal,onInFocus:o.getSearchHistory,onRemoveRequest:o.removeRequest,searchHistory:a.searchHistoryOptions},null,8,["onSearch","onInputed","onInFocus","onRemoveRequest","searchHistory"])]})),_:1}),Object(n["j"])("div",s,[Object(n["l"])(l)])]})),_:1})}var a=r("1da1"),o=(r("ac1f"),r("5319"),r("4de4"),r("d3b7"),r("96cf"),r("2ca0"),r("4dec")),c=new o["a"]("myDatabase",{autoIncrement:!0});c.version(4).stores({favorites:"++id, request, title, maxResult, sortOptValue, sortOptTitle",browsingHistory:"++id, videoId, title, description, chanelname, publishedAt, preview",searchHistory:"++id, request",watchLaterPlaylist:"++id, videoId, title, description, chanelname, publishedAt, preview"});var u=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={data:null,hasError:!1},e.prev=1,e.next=4,t(r).then((function(e){n.data=e}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e["catch"](1),n.hasError=!0,n.errorMessage=e.t0.message;case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,r){return e.apply(this,arguments)}}(),l=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.target,e.next=3,c[r].reverse().toArray();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.target,n=t.limit,s=t.offset,i=void 0===s?0:s,e.next=3,c[r].reverse().offset(i).limit(n).toArray();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.target,e.next=3,c[r].count();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.target,n=t.filterOptions,e.next=3,c[r].filter(n).toArray();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.target,n=t.where,s=t.val,e.next=3,c[r].where(n).startsWith(s).toArray();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.target,n=t.payload,e.next=3,c[r].add(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.target,n=t.id,e.next=3,c[r].delete(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=r("9b19"),j=r.n(v),O={class:"nav-bar-wrapper"},g={class:"nav-bar-container nav-bar"},y={class:"nav-bar-search-input"},w={class:"nav-bar-links"},x={class:"nav-bar-link"},I={class:"nav-bar-link"};function k(e,t,r,s,i,a){var o=Object(n["J"])("q-img"),c=Object(n["J"])("q-icon"),u=Object(n["J"])("router-link");return Object(n["B"])(),Object(n["i"])("div",O,[Object(n["j"])("div",g,[Object(n["j"])("div",{class:"nav-bar-logo",onClick:t[0]||(t[0]=function(t){return e.$router.push("/")})},[Object(n["l"])(o,{src:j.a})]),Object(n["j"])("div",y,[Object(n["I"])(e.$slots,"search-input",{},void 0,!0)]),Object(n["j"])("div",w,[Object(n["j"])("div",x,[Object(n["l"])(u,{class:"nav-bar-router-link",to:"/browsing-history"},{default:Object(n["P"])((function(){return[Object(n["l"])(c,{name:"history"})]})),_:1})]),Object(n["j"])("div",I,[Object(n["l"])(u,{class:"nav-bar-router-link",to:"/watch-later"},{default:Object(n["P"])((function(){return[Object(n["l"])(c,{name:"watch_later"})]})),_:1})])])])])}r("841c");var R={computed:{isSearch:function(){return this.$route.meta.search}}},L=(r("e11f"),r("6b0d")),B=r.n(L),M=r("068f"),q=r("0016"),C=r("93dc"),P=r.n(C);const _=B()(R,[["render",k],["__scopeId","data-v-46c72d44"]]);var H=_;P()(R,"components",{QImg:M["a"],QIcon:q["a"]});var V=["onClick"],S={class:"promptly-item-title"};function E(e,t,r,s,i,a){var o=Object(n["J"])("q-icon"),c=Object(n["J"])("q-input"),u=Object(n["J"])("q-btn");return Object(n["B"])(),Object(n["i"])("form",{class:"search-bar-wrapper",onSubmit:t[4]||(t[4]=Object(n["R"])((function(){return a.emitSearch&&a.emitSearch.apply(a,arguments)}),["prevent"]))},[Object(n["l"])(c,{class:"search-input",ref:"searchinput",modelValue:i.searchQuery,"onUpdate:modelValue":[t[0]||(t[0]=function(e){return i.searchQuery=e}),t[1]||(t[1]=function(e){a.emitInputedValue(e)})],onFocus:Object(n["R"])(a.emitFocus,["prevent"]),onBlur:a.changeVisibility,label:"Поиск",outlined:""},{append:Object(n["P"])((function(){return[Object(n["l"])(o,{name:"search"})]})),_:1},8,["modelValue","onFocus","onBlur"]),Object(n["j"])("div",{class:Object(n["t"])(["search-bar-promptly promptly",{show:i.focused}])},[(Object(n["B"])(!0),Object(n["i"])(n["a"],null,Object(n["H"])(r.searchHistory,(function(e){return Object(n["B"])(),Object(n["i"])("div",{class:"promptly-item",key:e.id,onClick:function(t){return a.searchPromptlyItem(e.request)},onMouseover:t[2]||(t[2]=function(e){return i.chosing=!0}),onMouseout:t[3]||(t[3]=function(e){return i.chosing=!1})},[Object(n["l"])(o,{class:"promptly-item-icon",name:"history"}),Object(n["j"])("span",S,Object(n["M"])(e.request),1),Object(n["l"])(u,{onClick:Object(n["R"])((function(t){return a.emitRemove(e.id)}),["stop"]),class:"promptly-item-remove-btn",color:"negative",size:"sm",padding:"xs",icon:"close",flat:""},null,8,["onClick"])],40,V)})),128))],2)],32)}var J={props:{searchHistory:{type:Array,default:[]}},data:function(){return{searchQuery:"",focused:!1,chosing:!1}},methods:{emitSearch:function(){""!==this.searchQuery&&(this.focused=!1,this.counter=-1,this.$refs.searchinput.blur(),this.$emit("search",this.searchQuery))},emitFocus:function(){this.focused=!0,this.$emit("inFocus")},changeVisibility:function(){this.chosing||(this.focused=!1)},emitInputedValue:function(e){this.$emit("inputed",e)},searchPromptlyItem:function(e){this.searchQuery=e,this.emitSearch()},emitRemove:function(e){this.$emit("removeRequest",e)}}},A=(r("42ee"),r("27f9")),$=r("9c40");const T=B()(J,[["render",E],["__scopeId","data-v-70d1b67f"]]);var W=T;P()(J,"components",{QInput:A["a"],QIcon:q["a"],QBtn:$["a"]});var Q={data:function(){return{message:"",errorMessege:"",isError:!1,isWarn:!1,isSuccess:!1}},watch:{message:function(){""!==this.message&&this.$q.notify({message:this.message,color:this.messageColor}),this.message=""}},computed:{messageColor:function(){return this.isError?(this.isError=!1,"red"):this.isWarn?(this.isWarn=!1,"orange"):this.isSuccess?(this.isSuccess=!1,"green"):void 0}}},D={components:{navBar:H,searchBar:W},mixins:[Q],data:function(){return{searchHistoryOptions:[]}},methods:{saveRequestToSearchHistory:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u(h,{target:"searchHistory",payload:{request:e}});case 2:case"end":return t.stop()}}),t)})))()},removeRequestIfItWasSavedBefore:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u(b,{target:"searchHistory",filterOptions:function(t){return t.request===e}});case 2:if(r=t.sent,r.hasError||!(r.data.length>0)){t.next=7;break}return n=r.data[0].id,t.next=7,u(m,{target:"searchHistory",id:n});case 7:case"end":return t.stop()}}),t)})))()},getSearchHistory:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u(d,{target:"searchHistory",limit:10});case 2:r=t.sent,r.hasError||(e.searchHistoryOptions=r.data);case 4:case"end":return t.stop()}}),t)})))()},routeAndSaveRequest:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.replace(/([\/=])/,""),r.next=3,t.$router.push("/search/".concat(n));case 3:return r.next=5,t.removeRequestIfItWasSavedBefore(n);case 5:return r.next=7,t.saveRequestToSearchHistory(n);case 7:case"end":return r.stop()}}),r)})))()},getRequestByInputedVal:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(""===e){r.next=7;break}return r.next=3,u(f,{target:"searchHistory",where:"request",val:e});case 3:n=r.sent,n.hasError||(t.searchHistoryOptions=n.data),r.next=8;break;case 7:t.getSearchHistory();case 8:case"end":return r.stop()}}),r)})))()},removeRequest:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,u(m,{target:"searchHistory",id:e});case 2:n=r.sent,n.hasError?(t.isError=!0,t.message="Ошибка: ".concat(n.message,", не удалос удалить запрос")):(t.searchHistoryOptions=t.searchHistoryOptions.filter((function(t){return t.id!==e})),t.isSuccess=!0,t.message="Запрос удален");case 4:case"end":return r.stop()}}),r)})))()},routeForGhPages:function(){var e=window.location.pathname.replace("/youTube-spa/","");console.log(e,window.location),this.$router.push(e)}},beforeMount:function(){this.routeForGhPages()}},z=(r("a58f"),r("4983"));const U=B()(D,[["render",i]]);var F=U;P()(D,"components",{QScrollArea:z["a"],QBtn:$["a"]});var N=r("6c02"),G={class:"home-wrapper"},K={class:"home-recomendations recomendations"},X={key:0,class:"recomendations-list"},Y={key:1,class:"recomendations-popular-list"},Z={key:2,class:"recomendations-empty-message"};function ee(e,t,r,s,i,a){var o=Object(n["J"])("result-list"),c=Object(n["J"])("empty");return Object(n["B"])(),Object(n["i"])("div",G,[Object(n["j"])("div",K,[i.isArrayEmpty(i.recomendationVideoList)?Object(n["h"])("",!0):(Object(n["B"])(),Object(n["i"])("div",X,[Object(n["l"])(o,{resultList:i.recomendationVideoList,title:"Рекомендации"},null,8,["resultList"])])),i.isArrayEmpty(i.popularVideoList)?Object(n["h"])("",!0):(Object(n["B"])(),Object(n["i"])("div",Y,[Object(n["l"])(o,{resultList:i.popularVideoList,title:"Сейчас популярно"},null,8,["resultList"])])),i.noDataCounter>=2?(Object(n["B"])(),Object(n["i"])("div",Z,[Object(n["l"])(c,{message:e.errorMessege},null,8,["message"])])):Object(n["h"])("",!0)])])}r("d81d"),r("159b"),r("caad"),r("2532"),r("a4d3"),r("e01a"),r("1276"),r("a9e3"),r("99af"),r("25f0");var te=r("d4ec"),re=r("bee2"),ne=(r("e9c4"),function(){function e(){Object(te["a"])(this,e)}return Object(re["a"])(e,[{key:"save",value:function(e,t){sessionStorage.setItem(e,JSON.stringify(t))}},{key:"get",value:function(e){return JSON.parse(sessionStorage.getItem(e))}},{key:"includes",value:function(e){return!!sessionStorage.getItem(e)}}]),e}()),se=new ne,ie=function(e,t){se.save(e,t)},ae=function(e){return se.get(e)},oe=function(e){return se.includes(e)},ce=function(e){if(e instanceof Array){var t=[];return e.forEach((function(e){var r;r=e.id instanceof Object?e.id.videoId:e.id,e.snippet&&t.push({videoId:r,chanelname:e.snippet.channelTitle,title:e.snippet.title,description:e.snippet.description,preview:e.snippet.thumbnails.medium.url,publishedAt:e.snippet.publishedAt})})),t}return e},ue=function(e){return{videoId:e.about.id,url:"https://www.youtube.com/embed/".concat(e.about.id,"?autoplay=1"),title:e.about.snippet.title,description:e.about.snippet.description,chanelname:e.about.snippet.channelTitle,publishedAt:e.about.snippet.publishedAt,preview:e.about.snippet.thumbnails.medium.url,views:e.statistics.viewCount,similarVideoList:ce(e.similarVideo)}},le=function(e){var t=e.split("T"),r=t[0].split("-"),n=r[0],s=Number(r[1].replace("0","")),i="".concat(pe(s)," ").concat(n," года");return i},de=function(e){return e.length<=0},pe=function(e){var t=["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"];return t[e-1]},be=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},fe=(r("d9e2"),r("4e82"),r("bc3a")),he=r.n(fe),me="https://www.googleapis.com/youtube/v3",ve={key1:"AIzaSyBWlj8NYVMXRmu8K-VVVrsxmwbfBf1Yrak",key2:"AIzaSyCz3FXHsEIcBmW4rl4nf1BNO6Z3rUm_E_c",key3:"AIzaSyCyrUrGROj3G0xHi5cOJDko68DIMv9W6n4",key4:"AIzaSyAmzDULEWUlMd63TDcW015O3Gy_paIoVDU"},je=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",he.a.get(me+"/search",{params:{key:ve.key1,part:"snippet",type:"video",order:t.sort,q:t.request,maxResults:t.maxResult}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",he.a.get(me+"/videos",{params:{part:t.part,id:t.videoId,key:ve.key2}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",he.a.get(me+"/videos",{params:{part:"snippet",chart:"mostPopular",key:ve.key3,maxResults:t.maxResult}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",he.a.get(me+"/search",{params:{key:ve.key4,part:"snippet",type:"video",relatedToVideoId:t.videoId,maxResults:t.maxResult}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=oe(r.request),s=[],!n){e.next=7;break}s=ae(r.request),console.log("data came from cache"),e.next=9;break;case 7:return e.next=9,t(r).then((function(e){s=e,s instanceof Error===!1&&(ie(r.request,s),console.log("data came from server"))}));case 9:return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),xe=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Le(je,t);case 2:return r=e.sent,e.abrupt("return",ce(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Le(ge,t);case 2:return r=e.sent,e.abrupt("return",ce(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={videoId:t.videoId,maxResult:t.maxResult},e.next=3,Le(ye,r);case 3:return n=e.sent,console.log(n),e.abrupt("return",ce(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={},n={videoId:t.request,part:"snippet",maxResult:t.maxResult},e.next=4,Le(Oe,n).then((function(e){Be(e)?r=e:(r.about=e[0],n.part="statistics")}));case 4:return e.next=6,Le(Oe,n).then((function(e){Be(e)?r=e:r.statistics=e[0].statistics}));case 6:return e.next=8,Le(ye,n).then((function(e){Be(e)?r=e:r.similarVideo=e}));case 8:return r instanceof Error===!1&&(r=ue(r)),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(r).then((function(e){n=e.data.items}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),n=e.t0;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}(),Be=function(e){var t=e instanceof Error;return!!t},Me=(r("c96a"),["onClick"]);function qe(e,t,r,s,i,a){var o=Object(n["J"])("top-title"),c=Object(n["J"])("q-btn"),u=Object(n["J"])("result-item");return Object(n["B"])(),Object(n["i"])("div",{class:Object(n["t"])(["result-list-wrapper",{small:r.small}])},[Object(n["l"])(o,{class:"result-list-title",title:r.title},null,8,["title"]),Object(n["j"])("div",{class:Object(n["t"])(["result-list",{small:r.small}])},[(Object(n["B"])(!0),Object(n["i"])(n["a"],null,Object(n["H"])(r.resultList,(function(t){return Object(n["B"])(),Object(n["i"])("div",{class:"result-list-item",key:t.id,onClick:function(r){return e.$emit("result-methods",t.videoId)}},[Object(n["l"])(c,{flat:"",class:"result-list-item-route-btn",onClick:function(r){return e.$router.push("/video/".concat(t.videoId))}},null,8,["onClick"]),Object(n["l"])(u,{small:r.small,result:t},null,8,["small","result"])],8,Me)})),128))],2)],2)}var Ce={class:"result-preview"},Pe={class:"result-text"},_e={class:"text-subtitle result-title overflow-elips"},He={key:0},Ve={class:"text-subtitle result-description overflow-elips"},Se={class:"result-item-absolute-slot"};function Ee(e,t,r,s,i,a){var o=Object(n["J"])("q-img"),c=Object(n["J"])("chanel-avatar");return Object(n["B"])(),Object(n["i"])("div",{class:Object(n["t"])(["result-item",{small:r.small}])},[Object(n["j"])("div",Ce,[Object(n["l"])(o,{src:r.result.preview},null,8,["src"])]),Object(n["j"])("div",Pe,[Object(n["j"])("div",_e,Object(n["M"])(r.result.title),1),Object(n["j"])("div",{class:Object(n["t"])(["text-subtitle result-published-day",{"overflow-elips":r.small}])},[r.small?Object(n["h"])("",!0):(Object(n["B"])(),Object(n["i"])("span",He,"Дата публикации:")),Object(n["k"])(" "+Object(n["M"])(i.definePublishedDay(r.result.publishedAt)),1)],2),Object(n["j"])("div",{class:Object(n["t"])(["text-subtitle result-chanel-title",{"overflow-elips":r.small}])},[r.small?Object(n["h"])("",!0):(Object(n["B"])(),Object(n["g"])(c,{key:0,size:"sm",title:r.result.chanelname},null,8,["title"])),Object(n["k"])(" "+Object(n["M"])(r.result.chanelname),1)],2),Object(n["j"])("div",Ve,Object(n["M"])(r.result.description),1)]),Object(n["j"])("div",Se,[Object(n["I"])(e.$slots,"absolute-slot",{},void 0,!0)])],2)}function Je(e,t,r,s,i,a){var o=Object(n["J"])("q-avatar");return Object(n["B"])(),Object(n["g"])(o,{size:r.size,color:"secondary","text-color":"white"},{default:Object(n["P"])((function(){return[Object(n["k"])(Object(n["M"])(a.firstLetter),1)]})),_:1},8,["size"])}var Ae={props:{size:{type:String,default:""},title:{type:String,default:""}},computed:{firstLetter:function(){return this.title[0].toUpperCase()}}},$e=r("cb32");const Te=B()(Ae,[["render",Je]]);var We=Te;P()(Ae,"components",{QAvatar:$e["a"]});var Qe={components:{chanelAvatar:We},data:function(){return{definePublishedDay:le}},props:{result:{type:Object,default:{}},small:{type:Boolean,default:!1}}};r("6ab0");const De=B()(Qe,[["render",Ee],["__scopeId","data-v-129d803d"]]);var ze=De;P()(Qe,"components",{QImg:M["a"]});var Ue={class:"top-title-block"},Fe=["innerHTML"],Ne={class:"top-title-slot"};function Ge(e,t,r,s,i,a){return Object(n["B"])(),Object(n["i"])("div",Ue,[Object(n["j"])("div",{class:"text-h6",innerHTML:r.title},null,8,Fe),Object(n["j"])("div",Ne,[Object(n["I"])(e.$slots,"top-title-slot",{},void 0,!0)])])}var Ke={props:{title:{type:String,default:""}}};r("24e1");const Xe=B()(Ke,[["render",Ge],["__scopeId","data-v-383bdd92"]]);var Ye=Xe,Ze={components:{resultItem:ze,topTitle:Ye},props:{resultList:{type:Array,default:[]},small:{type:Boolean,default:!1},title:{type:String,default:""}},methods:{emitId:function(e){this.$emit("clicked-video",e)}}};r("6cf3");const et=B()(Ze,[["render",qe],["__scopeId","data-v-00af25b8"]]);var tt=et;P()(Ze,"components",{QBtn:$["a"]});var rt={class:"empty-wrapper"},nt={class:"empty"},st={class:"empty-message text-subtitle"};function it(e,t,r,s,i,a){var o=Object(n["J"])("q-icon");return Object(n["B"])(),Object(n["i"])("div",rt,[Object(n["j"])("div",nt,[""!==r.message?(Object(n["B"])(),Object(n["g"])(o,{key:0,class:"empty-icon",name:"folder_off",size:"40px",color:"grey"})):Object(n["h"])("",!0),Object(n["j"])("div",st,Object(n["M"])(r.message),1)])])}var at={props:{message:{type:String,default:""}}};r("3c8d");const ot=B()(at,[["render",it],["__scopeId","data-v-0449fbbd"]]);var ct=ot;P()(at,"components",{QIcon:q["a"]});var ut={components:{resultList:tt,empty:ct},mixins:[Q],data:function(){return{popularVideoList:[],recomendationVideoList:[],resentWatchedVideosid:[],noDataCounter:0,isArrayEmpty:de}},methods:{getPopularVideoList:function(){var e=this;we(Ie,{request:"mostPopular",maxResult:5}).then((function(t){t.message?(e.isError=!0,e.errorMessege="Ошибка: ".concat(t.message),e.message=e.errorMessege,e.noDataCounter+=1):e.popularVideoList=t}))},getRecentWatchedVideosId:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u(d,{target:"browsingHistory",limit:5});case 2:r=t.sent,r.hasError||(e.resentWatchedVideosid=r.data.map((function(e){return e.videoId})));case 4:case"end":return t.stop()}}),t)})))()},getRecomendationVideoList:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.resentWatchedVideosid.length>0&&e.resentWatchedVideosid.forEach((function(t){we(ke,{request:"recomendations",maxResult:5,videoId:t}).then((function(t){t.message?(e.isError=!0,e.errorMessege="Ошибка: ".concat(t.message),e.message=e.errorMessege,e.noDataCounter+=1):(e.recomendationVideoList=t,e.hasRecomendations=!0)}))}));case 1:case"end":return t.stop()}}),t)})))()}},beforeMount:function(){var e=this;this.$q.loading.show(),this.getRecentWatchedVideosId().then((function(){e.getRecomendationVideoList().then((function(){e.getPopularVideoList(),e.$q.loading.hide()}))}))}};r("bf89");const lt=B()(ut,[["render",ee],["__scopeId","data-v-c4aa83ce"]]);var dt=lt,pt={class:"search-reslut-wrapper"},bt={key:0,class:"serach-result-list"},ft={key:1,class:"search-result-empty-messege"};function ht(e,t,r,s,i,a){var o=Object(n["J"])("resultList"),c=Object(n["J"])("empty");return Object(n["B"])(),Object(n["i"])("div",pt,[i.isArrayEmpty(i.resultList)?Object(n["h"])("",!0):(Object(n["B"])(),Object(n["i"])("div",bt,[Object(n["l"])(o,{resultList:i.resultList,title:a.searchTitle},null,8,["resultList","title"])])),i.isArrayEmpty(i.resultList)?(Object(n["B"])(),Object(n["i"])("div",ft,[Object(n["l"])(c,{message:e.errorMessege},null,8,["message"])])):Object(n["h"])("",!0)])}var mt={components:{resultList:tt,empty:ct},mixins:[Q],data:function(){return{resultList:[],options:{request:"",maxResult:5,sort:"searchSortUnspecified"},isArrayEmpty:de}},computed:{searchTitle:function(){return'Результаты поиска по запросу <b>"'.concat(this.options.request,'"</b>')}},watch:{"$route.path":function(){var e=this;this.$route.params.querry&&(this.$q.loading.show(),this.searchByRouteQuerry().then((function(){e.$q.loading.hide()})))}},methods:{searchByRouteQuerry:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.options.request=e.$route.params.querry,t.next=3,we(xe,e.options);case 3:r=t.sent,r.message?(e.isError=!0,e.errorMessege="Ошибка: ".concat(r.message),e.message=e.errorMessege):e.resultList=r;case 5:case"end":return t.stop()}}),t)})))()}},beforeMount:function(){var e=this;this.$q.loading.show(),this.searchByRouteQuerry().then((function(){e.$q.loading.hide()}))}};const vt=B()(mt,[["render",ht]]);var jt=vt,Ot={key:0,class:"video-watcher-wrapper video"},gt={class:"video-iframa-wrapper"},yt={class:"video-similar-scroll-area video-similar"},wt={key:1,class:"video-watcher-empty-message"};function xt(e,t,r,s,i,a){var o=Object(n["J"])("player"),c=Object(n["J"])("result-list"),u=Object(n["J"])("video-scroll-list"),l=Object(n["J"])("empty");return Object(n["B"])(),Object(n["i"])(n["a"],null,[i.allRequestsDone?(Object(n["B"])(),Object(n["i"])("div",Ot,[Object(n["j"])("div",gt,[Object(n["l"])(o,{video:i.currentVideo,isBtnDisabled:i.videoInWatchLaterPlaylist,onWatchLater:a.addVideoToWatchLaterPlaylist},null,8,["video","isBtnDisabled","onWatchLater"])]),Object(n["j"])("div",yt,[Object(n["l"])(u,{title:"Похожие видео"},{list:Object(n["P"])((function(){return[Object(n["l"])(c,{small:!0,resultList:i.currentVideo.similarVideoList},null,8,["resultList"])]})),_:1})])])):Object(n["h"])("",!0),i.allRequestsDone?Object(n["h"])("",!0):(Object(n["B"])(),Object(n["i"])("div",wt,[Object(n["l"])(l,{message:e.errorMessege},null,8,["message"])]))],64)}var It={class:"player-wrapper player"},kt={class:"player-iframe"},Rt={class:"player-text"},Lt={class:"player-info"},Bt={class:"player-description"};function Mt(e,t,r,s,i,a){var o=Object(n["J"])("frame-player"),c=Object(n["J"])("q-btn"),u=Object(n["J"])("video-info"),l=Object(n["J"])("video-decription");return Object(n["B"])(),Object(n["i"])("div",It,[Object(n["j"])("div",kt,[Object(n["l"])(o,{url:r.video.url},null,8,["url"])]),Object(n["j"])("div",Rt,[Object(n["j"])("div",Lt,[Object(n["l"])(u,{title:r.video.title,viewCount:r.video.views,publishedData:r.video.publishedAt},{btns:Object(n["P"])((function(){return[Object(n["l"])(c,{onClick:a.emitAddToWatchLater,icon:a.addBtnIcon,label:"смотреть позже",flat:"",disabled:r.isBtnDisabled},null,8,["onClick","icon","disabled"])]})),_:1},8,["title","viewCount","publishedData"])]),Object(n["j"])("div",Bt,[Object(n["l"])(l,{chanelname:r.video.chanelname,description:r.video.description},null,8,["chanelname","description"])])])])}var qt={class:"video-iframe-player"},Ct=["src"];function Pt(e,t,r,s,i,a){return Object(n["B"])(),Object(n["i"])("div",qt,[Object(n["j"])("iframe",{class:"ifarame",frameborder:"0",allowfullscreen:"",src:r.url},"\n        ",8,Ct)])}var _t={props:{url:{type:String,default:""}}};r("8b62");const Ht=B()(_t,[["render",Pt],["__scopeId","data-v-d8e7d068"]]);var Vt=Ht,St={class:"video-info-wrapper"},Et={class:"video-info-text"},Jt={class:"video-info-title text-h4"},At={class:"video-info-views text-subtitle"},$t={class:"video-info-published-data text-subtitle"},Tt={class:"video-info-btns"};function Wt(e,t,r,s,i,a){return Object(n["B"])(),Object(n["i"])("div",St,[Object(n["j"])("div",Et,[Object(n["j"])("div",Jt,Object(n["M"])(r.title),1),Object(n["j"])("div",At,"Просмотры: "+Object(n["M"])(i.formatNumber(r.viewCount)),1),Object(n["j"])("div",$t,"Дата публикации: "+Object(n["M"])(i.definePublishedDay(r.publishedData)),1)]),Object(n["j"])("div",Tt,[Object(n["I"])(e.$slots,"btns",{},void 0,!0)])])}var Qt={data:function(){return{definePublishedDay:le,formatNumber:be}},props:{title:{type:String,default:""},viewCount:{type:String,default:""},publishedData:{type:String,default:""}}};r("ab2f");const Dt=B()(Qt,[["render",Wt],["__scopeId","data-v-699d5d60"]]);var zt=Dt,Ut={class:"description-wrapper"},Ft={class:"description-chanel-title"},Nt=["innerHTML"];function Gt(e,t,r,s,i,a){var o=Object(n["J"])("q-separator"),c=Object(n["J"])("chanel-avatar"),u=Object(n["J"])("q-btn");return Object(n["B"])(),Object(n["i"])(n["a"],null,[Object(n["l"])(o),Object(n["j"])("div",Ut,[Object(n["j"])("div",Ft,[Object(n["l"])(c,{size:"md",title:r.chanelname},null,8,["title"]),Object(n["k"])(" "+Object(n["M"])(r.chanelname),1)]),Object(n["j"])("div",{class:Object(n["t"])(["description",{showAll:i.showAll}]),ref:"description"},[(Object(n["B"])(!0),Object(n["i"])(n["a"],null,Object(n["H"])(a.parsedDescription,(function(e){return Object(n["B"])(),Object(n["i"])("span",{class:"desription-item",key:e,innerHTML:e},null,8,Nt)})),128))],2),i.isDescriptionOverfloved?(Object(n["B"])(),Object(n["g"])(u,{key:0,flat:"",color:"grey",padding:"none",onClick:t[0]||(t[0]=function(e){return i.showAll=!i.showAll})},{default:Object(n["P"])((function(){return[Object(n["k"])(Object(n["M"])(a.descriptionBtnStatus),1)]})),_:1})):Object(n["h"])("",!0)]),Object(n["l"])(o)],64)}var Kt=r("2909"),Xt={components:{chanelAvatar:We},data:function(){return{showAll:!1,isDescriptionOverfloved:!1}},props:{description:{type:String,default:""},chanelname:{type:String,default:""}},computed:{parsedDescription:function(){var e=/(?:(?:https?|ftp):\/\/|\b(?:[a-z\d]+\.[a-z\d]))(?:(?:[^\s()<>]+|\((?:[^\s()<>]+|(?:\([^\s()<>]+\)))?\))+(?:\((?:[^\s()<>]+|(?:\(?:[^\s()<>]+\)))?\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))?/,t=this.description.split("\n"),r=[];return t.forEach((function(t){var n=t.replace("","<br>").replace(e,'<a class="description-link" target="_blank" href="$&">$&</a>');r.push(n)})),r},descriptionBtnStatus:function(){return this.showAll?"Свернуть":"Развернуть"},isOverflowing:function(){var e=this.$refs.description,t=e.offsetHeight,r=Object(Kt["a"])(e.children).reduce((function(e,t){return e+t.offsetHeight}),0);return r>t+16}},mounted:function(){this.isDescriptionOverfloved=this.isOverflowing}},Yt=(r("fc47"),r("eb85"));const Zt=B()(Xt,[["render",Gt],["__scopeId","data-v-280cac86"]]);var er=Zt;P()(Xt,"components",{QSeparator:Yt["a"],QBtn:$["a"]});var tr={components:{framePlayer:Vt,videoInfo:zt,videoDecription:er},props:{video:{type:Object,default:{}},isBtnDisabled:{type:Boolean,default:!1}},computed:{addBtnIcon:function(){return this.isBtnDisabled?"done":"watch_later"}},methods:{emitAddToWatchLater:function(){this.$emit("watch-later",this.video)}}};r("11be");const rr=B()(tr,[["render",Mt],["__scopeId","data-v-368784de"]]);var nr=rr;P()(tr,"components",{QBtn:$["a"]});var sr={class:"similar-video-scroll-area similar-video"},ir={class:"video-similar-title text-h6"};function ar(e,t,r,s,i,a){var o=Object(n["J"])("q-scroll-area");return Object(n["B"])(),Object(n["i"])("div",sr,[Object(n["j"])("div",ir,Object(n["M"])(r.title),1),Object(n["l"])(o,{style:{height:"90vh",width:"100%"}},{default:Object(n["P"])((function(){return[Object(n["I"])(e.$slots,"list",{},void 0,!0)]})),_:3})])}var or={props:{title:{type:String,default:""}}};r("bcdd");const cr=B()(or,[["render",ar],["__scopeId","data-v-2084bb2f"]]);var ur=cr;P()(or,"components",{QScrollArea:z["a"]});var lr={components:{resultList:tt,player:nr,videoScrollList:ur,empty:ct},mixins:[Q],data:function(){return{videoId:"",currentVideo:{},videoInWatchLaterPlaylist:!1,allRequestsDone:!1}},watch:{"$route.path":function(){var e=this;this.$route.params.id&&(this.$q.loading.show(),this.getRoutedVideo().then((function(){e.allRequestsDone&&(e.isInWatchLaterPlaylist(),e.saveVideoToBrowseHistory().then((function(){e.$q.loading.hide()})))})))}},methods:{getRoutedVideo:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.allRequestsDone=!1,e.videoId=e.$route.params.id,t.next=4,we(Re,{request:e.videoId,maxResult:5}).then((function(t){t.message?(e.$q.loading.hide(),e.errorMessege="Ошибка: ".concat(t.message),e.isError=!0,e.message=e.errorMessege):(e.allRequestsDone=!0,e.currentVideo=t)}));case 4:case"end":return t.stop()}}),t)})))()},saveVideoToBrowseHistory:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={videoId:e.currentVideo.videoId,title:e.currentVideo.title,description:e.currentVideo.description,chanelname:e.currentVideo.chanelname,publishedAt:e.currentVideo.publishedAt,preview:e.currentVideo.preview},t.next=3,u(h,{target:"browsingHistory",payload:r});case 3:case"end":return t.stop()}}),t)})))()},addVideoToWatchLaterPlaylist:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n={videoId:e.videoId,title:e.title,description:e.description,chanelname:e.chanelname,publishedAt:e.publishedAt,preview:e.preview},r.next=3,u(h,{target:"watchLaterPlaylist",payload:n}).then((function(e){e.hasError?(t.isError=!0,t.message="Не удалось сохранить видео"):(t.videoInWatchLaterPlaylist=!0,t.isSuccess=!0,t.message="Видео успешно сохранено")}));case 3:case"end":return r.stop()}}),r)})))()},isInWatchLaterPlaylist:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u(b,{target:"watchLaterPlaylist",filterOptions:function(t){return t.videoId===e.videoId}});case 2:r=t.sent,!r.hasError&&r.data.length>0&&(e.videoInWatchLaterPlaylist=!0);case 4:case"end":return t.stop()}}),t)})))()},removeVideoIfItWasSavedBefore:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u(b,{target:"browsingHistory",filterOptions:function(t){return t.videoId===e.videoId}});case 2:if(r=t.sent,r.hasError||!(r.data.length>0)){t.next=7;break}return n=r.data[0].id,t.next=7,u(m,{target:"browsingHistory",id:n});case 7:case"end":return t.stop()}}),t)})))()}},beforeMount:function(){var e=this;this.$q.loading.show(),this.getRoutedVideo().then((function(){e.allRequestsDone&&(e.isInWatchLaterPlaylist(),e.removeVideoIfItWasSavedBefore(),e.saveVideoToBrowseHistory().then((function(){e.$q.loading.hide()})))}))}};r("6611");const dr=B()(lr,[["render",xt],["__scopeId","data-v-01c719be"]]);var pr=dr,br={class:"watch-later-playlist-wrapper"},fr={class:"watch-later-playlist-title"},hr={class:"watch-later-playlist-list playlist"},mr={class:"watch-later-playlist-observer observer"},vr={key:0,class:"watch-later-playlist-empty-msg"};function jr(e,t,r,s,i,a){var o=Object(n["J"])("q-btn"),c=Object(n["J"])("top-title"),u=Object(n["J"])("result-item"),l=Object(n["J"])("empty"),d=Object(n["J"])("confirm-modal"),p=Object(n["K"])("intersection");return Object(n["B"])(),Object(n["i"])(n["a"],null,[Object(n["j"])("div",br,[Object(n["j"])("div",fr,[i.isArrayEmpty(i.playListItems)?Object(n["h"])("",!0):(Object(n["B"])(),Object(n["g"])(c,{key:0,title:"Смотреть позже"},{"top-title-slot":Object(n["P"])((function(){return[Object(n["l"])(o,{class:"playlist-clear-btn",flat:"",label:"Очистить плейлист",padding:"xs",icon:"clear_all",onClick:t[0]||(t[0]=function(e){return i.showClearConfirm=!i.showClearConfirm})})]})),_:1}))]),Object(n["j"])("div",hr,[(Object(n["B"])(!0),Object(n["i"])(n["a"],null,Object(n["H"])(i.playListItems,(function(t){return Object(n["B"])(),Object(n["i"])("div",{class:"playlist-item",key:t.id},[Object(n["l"])(o,{flat:"",class:"playlist-item-route-btn",onClick:function(r){return e.$router.push("/video/".concat(t.videoId))}},null,8,["onClick"]),Object(n["l"])(u,{result:t},{"absolute-slot":Object(n["P"])((function(){return[Object(n["l"])(o,{class:"playlist-item-remove-btn",label:"Удалить",color:"negative",icon:"close",flat:"",onClick:function(e){return a.remove(t.id)}},null,8,["onClick"])]})),_:2},1032,["result"])])})),128)),Object(n["Q"])(Object(n["j"])("div",mr,null,512),[[p,a.loadMore]]),i.isArrayEmpty(i.playListItems)?(Object(n["B"])(),Object(n["i"])("div",vr,[Object(n["l"])(l,{message:a.playListEmptyMsg},null,8,["message"])])):Object(n["h"])("",!0)])]),Object(n["l"])(d,{show:i.showClearConfirm,"onUpdate:show":t[1]||(t[1]=function(e){return i.showClearConfirm=e}),title:"Вы уверены что хотите очистить плейлист?",onConfirm:a.clearPlayList},null,8,["show","onConfirm"])],64)}var Or={name:"intersection",mounted:function(e,t){var r={rootMargin:"0px",threshold:1},n=function(e){e[0].isIntersecting&&t.value()},s=new IntersectionObserver(n,r);s.observe(e)}},gr={class:"confirm-modal-title text-h6"},yr={class:"confirm-modal-btns btns"};function wr(e,t,r,s,i,a){var o=Object(n["J"])("q-btn"),c=Object(n["J"])("modal-window");return Object(n["B"])(),Object(n["g"])(c,{show:e.show,"onUpdate:show":t[1]||(t[1]=function(t){return e.show=t})},{title:Object(n["P"])((function(){return[Object(n["j"])("div",gr,Object(n["M"])(r.title),1)]})),body:Object(n["P"])((function(){return[Object(n["j"])("div",yr,[Object(n["l"])(o,{class:"btns-item",color:"primary",label:"Отмена",onClick:e.closeModal,flat:""},null,8,["onClick"]),Object(n["l"])(o,{onClick:t[0]||(t[0]=function(t){return e.$emit("confirm")}),class:"btns-item",color:"primary",label:"Да"})])]})),_:1},8,["show"])}function xr(e,t,r,s,i,a){var o=Object(n["J"])("q-btn");return Object(n["B"])(),Object(n["i"])("div",{class:Object(n["t"])(["modal-window-wrapper",{show:e.show}]),onClick:t[1]||(t[1]=function(){return a.closeBlur&&a.closeBlur.apply(a,arguments)})},[Object(n["j"])("div",{class:"modal-window-container",onClick:t[0]||(t[0]=Object(n["R"])((function(){}),["stop"])),style:Object(n["u"])({maxWidth:r.maxWidth+"px"})},[r.xbtn?(Object(n["B"])(),Object(n["g"])(o,{key:0,onClick:e.closeModal,class:"modal-window-close-btn",icon:"close"},null,8,["onClick"])):Object(n["h"])("",!0),Object(n["I"])(e.$slots,"title",{},void 0,!0),Object(n["I"])(e.$slots,"body",{},void 0,!0)],4)],2)}var Ir={props:{show:{type:Boolean,default:!1}},methods:{openModal:function(){this.$emit("update:show",!0)},closeModal:function(){this.$emit("update:show",!1)}}},kr={mixins:[Ir],props:{maxWidth:{type:Number,default:400},closeOnBlur:{type:Boolean,default:!1},xbtn:{type:Boolean,default:!1}},methods:{closeBlur:function(){this.closeOnBlur&&this.closeModal()}}};r("ca2b");const Rr=B()(kr,[["render",xr],["__scopeId","data-v-a4a225ca"]]);var Lr=Rr;P()(kr,"components",{QBtn:$["a"]});var Br={components:{modalWindow:Lr},mixins:[Ir],props:{title:{type:String,default:""}}};r("c66e");const Mr=B()(Br,[["render",wr],["__scopeId","data-v-535deef0"]]);var qr=Mr;P()(Br,"components",{QBtn:$["a"]});var Cr={components:{resultItem:ze,topTitle:Ye,empty:ct,confirmModal:qr},mixins:[Q],directives:[Or],data:function(){return{playListItems:[],errMessage:"",showClearConfirm:!1,listTotalCount:0,loadOptions:{limit:12,offset:0},isArrayEmpty:de}},computed:{playListEmptyMsg:function(){return""!==this.errMessage?this.errMessage:"Плейлист пуст"}},methods:{getPlaylistItems:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u(d,{target:"watchLaterPlaylist",limit:e.loadOptions.limit,offset:e.loadOptions.offset+=e.playListItems.length});case 2:r=t.sent,r.hasError?(e.isError=!0,e.errorMessege="Ошибка: ".concat(r.errorMessage,", список видео из плейлиста не получен"),e.message=e.errorMessege):e.playListItems=[].concat(Object(Kt["a"])(e.playListItems),Object(Kt["a"])(r.data));case 4:case"end":return t.stop()}}),t)})))()},getPlayListTotalCount:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u(p,{target:"watchLaterPlaylist"});case 2:r=t.sent,r.hasError?e.listTotalCount=e.playListItems.length:e.listTotalCount=r.data;case 4:case"end":return t.stop()}}),t)})))()},loadMore:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.listTotalCount>e.playListItems.length&&e.getPlaylistItems();case 1:case"end":return t.stop()}}),t)})))()},remove:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,u(m,{target:"watchLaterPlaylist",id:e}).then((function(r){r.hasError?(t.isError=!0,t.message="Ошибка: ".concat(r.errorMessage,", изменения не сохранены")):(t.playListItems=t.playListItems.filter((function(t){return t.id!==e})),t.isSuccess=!0,t.message="Видео удалено из плейлиста")}));case 2:case"end":return r.stop()}}),r)})))()},clearPlayList:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.playListItems.forEach((function(t){u(m,{target:"watchLaterPlaylist",id:t.id}).then((function(t){t.hasError?(e.isError=!0,e.message="Ошибка: ".concat(t.errorMessage,", не удалось очистить плейлист")):(e.playListItems=e.playListItems.filter((function(e){return e.id!==id})),e.isSuccess=!0,e.message="Плейлист очищен")}))}));case 2:case"end":return t.stop()}}),t)})))()}},beforeMount:function(){var e=this;this.$q.loading.show(),this.getPlaylistItems().then((function(){e.getPlayListTotalCount(),e.$q.loading.hide()}))}},Pr=(r("2b0d"),r("9748"));const _r=B()(Cr,[["render",jr],["__scopeId","data-v-19f17124"]]);var Hr=_r;P()(Cr,"components",{QBtn:$["a"]}),P()(Cr,"directives",{Intersection:Pr["a"]});var Vr={class:"browse-history-wrapper"},Sr={class:"browse-history-title"},Er={class:"browse-history-list history"},Jr=Object(n["k"])(" Смотреть позже "),Ar=Object(n["k"])(" Удалить "),$r={class:"browse-history-observer observer"},Tr={key:0,class:"history-empty-msg"};function Wr(e,t,r,s,i,a){var o=Object(n["J"])("q-btn"),c=Object(n["J"])("top-title"),u=Object(n["J"])("q-icon"),l=Object(n["J"])("q-item-section"),d=Object(n["J"])("q-item"),p=Object(n["J"])("q-list"),b=Object(n["J"])("q-menu"),f=Object(n["J"])("result-item"),h=Object(n["J"])("empty"),m=Object(n["J"])("confirm-modal"),v=Object(n["K"])("close-popup"),j=Object(n["K"])("intersection");return Object(n["B"])(),Object(n["i"])(n["a"],null,[Object(n["j"])("div",Vr,[Object(n["j"])("div",Sr,[i.isArrayEmpty(i.browseHistoryList)?Object(n["h"])("",!0):(Object(n["B"])(),Object(n["g"])(c,{key:0,title:"История просмотров"},{"top-title-slot":Object(n["P"])((function(){return[Object(n["l"])(o,{class:"history-clear-btn",flat:"",label:"Очистить историю",padding:"xs",icon:"clear_all",onClick:t[0]||(t[0]=function(e){return i.showConfirmModal=!i.showConfirmModal})})]})),_:1}))]),Object(n["j"])("div",Er,[(Object(n["B"])(!0),Object(n["i"])(n["a"],null,Object(n["H"])(i.browseHistoryList,(function(t){return Object(n["B"])(),Object(n["i"])("div",{class:"history-item",key:t.id},[Object(n["l"])(o,{flat:"",class:"history-item-route-btn",onClick:function(r){return e.$router.push("/video/".concat(t.videoId))}},null,8,["onClick"]),Object(n["l"])(f,{result:t},{"absolute-slot":Object(n["P"])((function(){return[Object(n["l"])(o,{class:"history-item-menu",icon:"more_vert",flat:""},{default:Object(n["P"])((function(){return[Object(n["l"])(b,{anchor:"center left",self:"center left"},{default:Object(n["P"])((function(){return[Object(n["l"])(p,{style:{"min-width":"100px"}},{default:Object(n["P"])((function(){return[Object(n["Q"])((Object(n["B"])(),Object(n["g"])(d,{onClick:function(e){return a.addVideoToWatchLaterPlaylist(t)},clickable:!i.playListItemsVideosId.includes(t.videoId)},{default:Object(n["P"])((function(){return[Object(n["l"])(l,{side:""},{default:Object(n["P"])((function(){return[i.playListItemsVideosId.includes(t.videoId)?Object(n["h"])("",!0):(Object(n["B"])(),Object(n["g"])(u,{key:0,name:"watch_later"})),i.playListItemsVideosId.includes(t.videoId)?(Object(n["B"])(),Object(n["g"])(u,{key:1,name:"done"})):Object(n["h"])("",!0)]})),_:2},1024),Object(n["l"])(l,null,{default:Object(n["P"])((function(){return[Jr]})),_:1})]})),_:2},1032,["onClick","clickable"])),[[v]]),Object(n["Q"])((Object(n["B"])(),Object(n["g"])(d,{onClick:function(e){return a.remove(t.id)},clickable:""},{default:Object(n["P"])((function(){return[Object(n["l"])(l,{side:""},{default:Object(n["P"])((function(){return[Object(n["l"])(u,{name:"close"})]})),_:1}),Object(n["l"])(l,null,{default:Object(n["P"])((function(){return[Ar]})),_:1})]})),_:2},1032,["onClick"])),[[v]])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["result"])])})),128)),Object(n["Q"])(Object(n["j"])("div",$r,null,512),[[j,a.loadMore]]),i.isArrayEmpty(i.browseHistoryList)?(Object(n["B"])(),Object(n["i"])("div",Tr,[Object(n["l"])(h,{message:a.historyEmptyMessage},null,8,["message"])])):Object(n["h"])("",!0)])]),Object(n["l"])(m,{show:i.showConfirmModal,"onUpdate:show":t[1]||(t[1]=function(e){return i.showConfirmModal=e}),title:"Вы уверены что хотите очистить историю просмотров?",onConfirm:a.clearHistory},null,8,["show","onConfirm"])],64)}var Qr={components:{resultItem:ze,topTitle:Ye,empty:ct,confirmModal:qr},mixins:[Q],directives:[Or],data:function(){return{browseHistoryList:[],playListItemsVideosId:[],showConfirmModal:!1,listTotalCount:0,loadOptions:{limit:12,offset:0},isArrayEmpty:de}},computed:{historyEmptyMessage:function(){return""!==this.errorMessege?this.errorMessege:"История просмотров пуста"}},methods:{getBrowseHistoryList:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u(d,{target:"browsingHistory",limit:e.loadOptions.limit,offset:e.loadOptions.offset+=e.browseHistoryList.length});case 2:r=t.sent,r.hasError?(e.isError=!0,e.errorMessege="Ошибка: ".concat(r.errorMessage,", история просмотров не получена"),e.message=e.errorMessege):e.browseHistoryList=[].concat(Object(Kt["a"])(e.browseHistoryList),Object(Kt["a"])(r.data));case 4:case"end":return t.stop()}}),t)})))()},getBrowseHistoryListTotalCount:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u(p,{target:"browsingHistory"});case 2:r=t.sent,r.hasError?e.listTotalCount=e.browseHistoryList.length:e.listTotalCount=r.data;case 4:case"end":return t.stop()}}),t)})))()},loadMore:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.listTotalCount>e.browseHistoryList.length&&e.getBrowseHistoryList();case 1:case"end":return t.stop()}}),t)})))()},getPlaylistItemsVideosId:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u(l,{target:"watchLaterPlaylist"});case 2:r=t.sent,r.hasError?(e.isError=!0,e.message="Ошибка: ".concat(r.errorMessage,", при получении информации о плейлисте ")):e.playListItemsVideosId=r.data.map((function(e){return e.videoId}));case 4:case"end":return t.stop()}}),t)})))()},addVideoToWatchLaterPlaylist:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n={videoId:e.videoId,title:e.title,description:e.description,chanelname:e.chanelname,publishedAt:e.publishedAt,preview:e.preview},r.next=3,u(h,{target:"watchLaterPlaylist",payload:n}).then((function(r){r.hasError?(t.isError=!0,t.message="Ошибка: ".concat(r.errorMessage,", не удалось добавить видео в плейлист")):(t.playListItemsVideosId.push(e.videoId),t.isSuccess=!0,t.message="Видео успешно добавлено")}));case 3:case"end":return r.stop()}}),r)})))()},remove:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,u(m,{target:"browsingHistory",id:e}).then((function(r){r.hasError?(t.isError=!0,t.message="Ошибка: ".concat(r.errorMessage,", не удалось удалить видео из истории просмотров")):(t.browseHistoryList=t.browseHistoryList.filter((function(t){return t.id!==e})),t.isSuccess=!0,t.message="Видео удалено из истории просмотров")}));case 2:case"end":return r.stop()}}),r)})))()},clearHistory:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.browseHistoryList.forEach((function(t){u(m,{target:"browsingHistory",id:t.id}).then((function(r){r.hasError?(e.isError=!0,e.message="Ошибка: ".concat(r.errorMessage,", не удалось очистить историю")):(e.browseHistoryList=e.browseHistoryList.filter((function(e){return e.id!==t.id})),e.showConfirmModal=!1,e.isSuccess=!0,e.message="История просмотров очищена")}))}));case 2:case"end":return t.stop()}}),t)})))()}},beforeMount:function(){var e=this;this.$q.loading.show(),this.getBrowseHistoryList().then((function(){e.getBrowseHistoryListTotalCount(),e.getPlaylistItemsVideosId(),e.$q.loading.hide()}))}},Dr=(r("2c5e"),r("4e73")),zr=r("1c1c"),Ur=r("66e5"),Fr=r("4074"),Nr=r("7f67");const Gr=B()(Qr,[["render",Wr],["__scopeId","data-v-0f77d216"]]);var Kr=Gr;P()(Qr,"components",{QBtn:$["a"],QMenu:Dr["a"],QList:zr["a"],QItem:Ur["a"],QItemSection:Fr["a"],QIcon:q["a"]}),P()(Qr,"directives",{ClosePopup:Nr["a"],Intersection:Pr["a"]});var Xr=[{path:"/",name:"Home",component:dt},{path:"/browsing-history",name:"History",component:Kr},{path:"/watch-later",name:"WatchLaterPlaylist",component:Hr},{path:"/search/:querry",name:"SearchResults",component:jt},{path:"/video/:id",name:"Video",component:pr}],Yr=Object(N["a"])({history:Object(N["b"])("/youTube-spa/"),routes:Xr}),Zr=Yr,en=r("b05d"),tn=(r("0e21"),r("14c0")),rn=r.n(tn),nn=(r("e54f"),r("2a19")),sn=r("f508"),an={config:{},plugins:{Notify:nn["a"],Loading:sn["a"]},lang:rn.a},on=r("b3fe"),cn=Object(n["f"])(F);cn.config.globalProperties.$q=on["a"],cn.use(en["a"],an).use(Zr).mount("#app")},"5c20":function(e,t,r){},6611:function(e,t,r){"use strict";r("1a09")},"6ab0":function(e,t,r){"use strict";r("f694")},"6cf3":function(e,t,r){"use strict";r("520b")},"8b62":function(e,t,r){"use strict";r("00f2")},"9b19":function(e,t,r){e.exports=r.p+"img/logo.6980b57d.svg"},a58f:function(e,t,r){"use strict";r("ce22")},a67b:function(e,t,r){},ab2f:function(e,t,r){"use strict";r("55a9")},ad73:function(e,t,r){},ae38:function(e,t,r){},bcdd:function(e,t,r){"use strict";r("ae38")},bf89:function(e,t,r){"use strict";r("cb11")},c360:function(e,t,r){},c66e:function(e,t,r){"use strict";r("47d4")},ca2b:function(e,t,r){"use strict";r("20e5")},cb11:function(e,t,r){},ce22:function(e,t,r){},e11f:function(e,t,r){"use strict";r("0bec")},f5f7:function(e,t,r){},f694:function(e,t,r){},fc47:function(e,t,r){"use strict";r("1acc")}});
//# sourceMappingURL=app.87d61d01.js.map